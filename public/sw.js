version="v1.2";self.addEventListener("install",e=>{e.waitUntil(caches.open(version).then(e=>e.addAll(["index.html","i.png","shared.js"])))}),self.addEventListener("activate",e=>{self.clients.matchAll({includeUncontrolled:!0}).then(e=>{e.map(e=>e.url)}),e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==version)return caches.delete(e)}))).then(function(){return self.clients.claim()}))}),self.addEventListener("fetch",e=>{"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(caches.match(e.request).then(t=>t||fetch(e.request).then(t=>caches.open(version).then(n=>{if("POST"!==e.request.method&&!e.request.url.includes("socket.io"))try{n.put(e.request,t.clone())}catch(e){console.log(e)}return t}))))});